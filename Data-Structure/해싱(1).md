## 해싱 | 정적 해싱
### ⦿ 해시 테이블
- 해시 테이블은 b개의 버킷으로 분할(`ht[0], ..., ht[b-1]`)
- 한 버킷은 s개의 슬롯(slot)으로 구성
- 한 슬롯에는 하나의 `key-value` 쌍을 저장할 수 있음

![](https://velog.velcdn.com/images/oazin15/post/005d0bd9-cd08-4c11-8a03-843634cd861b/image.png)

>☄️ **충돌**: 서로 다른 key들이 같은 해시 인덱스를 가져 같은 버킷에 저장되려는 현상
>💥 **오버플로**: 해시 함수가 서로 다른 키들을 같은 버킷에 매핑시키면서, 해당 버킷이 허용하는 저장 공간을 초과하는 현상 (충돌이 누적될 때 발생)

### ⦿ 해시 함수
- 키를 해시 테이블 내의 버킷과 연결
- 어떤 키 값k에 대해서 h(k)는 0과 b-1 사이의 정수가 됨
- h(k)를 k의 해시 또는 홈 주소(home address)라고 함
- 이상적인 조건하에서는 사전 쌍들이 모두 해당 홈 버킷에 저장

>💡 **균일 해시 함수(uniform hash function)**
b개의 버킷 각각에 임의의 k가 대응될 확률이 같은 특성을 만족하는 해시 함수

#### ◎ 제산 함수
- 실제로 가장 많이 쓰이는 해시 함수로서 키 값이 음이 아닌 정수라고 가정
- 홈 버킷은 MOD(%) 연산자에 의해 결정
```
h(k) = k % D

◆ 버킷 주소의 범위는 0~(D-1)이고 해시 테이블에는 적어도 b=D개의 버킷이 있어야 함
◆ D(제수)의 선택이 해시 충돌 및 오버플로 빈도에 영향을 줌
```

#### ◎ 중간 제곱 함수
- 키를 제곱한 후에 버킷 주소를 얻기 위해 그 결과의 중간에 있는 적절한 수의 비트를 취해서 홈 버킷을 정하는 방법
- 버킷 주소를 얻기 위해 사용되는 비트의 수는 테이블 크기에 달려있음
- `r`개의 비트가 사용된다면 각 값들의 범위는 `0~2r-1`까지
예) 키 `k = 123` → `k^2 = 15129` → 중간 두 자리 `51` 선택 → 해시 주소 = 51

#### ◎ 접지(folding) 함수
- 숫자로 된 키 k를 몇 부분으로 나누는데, 마지막 부분을 제외하고는 길이가 같음
- 다음, 각 부분들을 서로 더하여 k에 대한 해시 주소를 만듦
예) 키 `k = 20251234` → `2025`, `1234`로 두 부분 분할 → `2025 + 1234 = 3259` → 해시 주소 = 3259 % 버킷 수 (예: 100) = 59

#### ◎ 숫자 분석 함수
- 테이블에 있는 모든 키를 미리 알고 있는 정적 파일과 같은 경우에 유용!
- 키 값의 특정 자리수나 패턴을 추출하여 해시값으로 사용하는 방법
예) 학번 `20251234` → 중간 두 자리 `12` → 해시 인덱스: 12

### ⦿ 안전 해시 함수
- 단방향 특성
`h(k) = c`를 만족시키는 `c`가 주어졌을 때 `k`를 찾는 것을 계산적으로 어렵게 만드는 것
- 강한 충돌 저항
`h(x) = h(y)`를 만족시키는 `(x, y)` 쌍을 계산적으로 찾기 어렵게 만드는 것

#### ◎ SHA
- 대표적인 안전 해시 함수(Secure Hash Algorithm)
- 입력 크기에 상관없이 고정된 길이의 해시 값을 생성
- 단방향성, 충돌 저항성 등의 보안 성질을 만족
- 보통 암호, 디지털 서명 등에서 사용됨

(1) 데이터 블록 크기에 상관없이 적용될 수 있어야 한다

(2) `h`는 고정 길이의 해시 코드를 만들어야 한다

(3) `h(k)`는 어떤 `k`가 주어져도 계산이 비교적 쉬워서 하드웨어와 소프트웨어의 구현이 실용적이어야 한다

### ⦿ 오버플로 처리
#### ◎ 개방 주소법(open addressing)
**① 선형 조사법**
- 충돌 시, 다음 빈 버켓을 찾아 데이터를 삽입
- 선형 조사법으로 오버플로를 해결하는 경우 키들이 클러스터링되는 경향이 있음
- 또한, 인접한 클러스터들이 서로 통합까지 되는 경향이 있어 탐색 시간을 증가시킴
```
(1) `h(x)`를 계산
(2) 다음과 같은 경우 중 어느 하나가 발생할 때까지 ht[h(k)], ..., ht[(h(k)+j)%b] 순서로 해시 테이블 버킷 조사
  (a) 버킷 ht[h(k)+j)%b]에 값이 k인 키 쌍이 있는 경우. 이 경우 원하는 쌍이 발견되었음
  (b) ht[h(k)+j]가 비어 있는 경우. k는 테이블에 없음.
  (c) 시작 위치 ht[h(k)]로 돌아온 경우. 테이블은 만원이고 k는 테이블에 없음.
```

#### ◎ 체인법
- 각 버킷에 대한 데이터들을 리스트로 구성
- 일반적으로 체인법과 함께 제산 함수를 사용하면 가장 좋은 성능을 가지게 됨
